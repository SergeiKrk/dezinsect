---
import { markdownify } from "@lib/utils/textConverter";
import HomapageFeature from "@layouts/function-components/HomapageFeature";
import { getEntryBySlug } from "astro:content";
const { key_services } = Astro.props;
const { title, service_top_list, basic_services } = key_services;
const homepage = await getEntryBySlug("homepage", "index");
---

<section class="section key-feature relative">
  <img
    class="invisible absolute left-0 top-0 -z-[1] -translate-y-1/2 xl:visible"
    src="/images/protivogaz.webp"
    height={160}
    width={80}
    alt="услуги санэпидемстанции"
  />

  <div class="container">
    <div class="row justify-between text-center lg:text-start">
      <div class="lg:col-5">
        <h2
          class="animate__animated animate__fadeIn"
          data-wow-duration="2s"
          data-wow-delay="5s"
          set:html={markdownify(title)}
        />
      </div>
      <div class="mt-6 lg:col-7 lg:mt-0">
        <div class="row">
          {
            basic_services.map((services: any) => (
              <div class="mb-2 md:col-6">
                <a
                  href={`/uslugi/${services.url}`}
                  rel="prefetch-intent"
                  class="flex rounded-xl bg-[#EDF7F3] p-2 shadow-xl hover:bg-white hover:shadow-2xl hover:shadow-green-800/50 lg:p-4"
                >
                  <div class="w-30 h-30 flex items-center justify-center text-red-500 lg:mr-4">
                    <svg
                      class="z-10"
                      xmlns="http://www.w3.org/2000/svg"
                      width="100"
                      height="100"
                      viewBox="0 0 24 24"
                    >
                      <g transform="rotate(90 12 12)">
                        <path
                          fill="#ec6227"
                          d="M20.94 11A8.994 8.994 0 0 0 13 3.06V2c0-.55-.45-1-1-1s-1 .45-1 1v1.06A8.994 8.994 0 0 0 3.06 11H2c-.55 0-1 .45-1 1s.45 1 1 1h1.06A8.994 8.994 0 0 0 11 20.94V22c0 .55.45 1 1 1s1-.45 1-1v-1.06A8.994 8.994 0 0 0 20.94 13H22c.55 0 1-.45 1-1s-.45-1-1-1h-1.06zM12 19c-3.87 0-7-3.13-7-7s3.13-7 7-7s7 3.13 7 7s-3.13 7-7 7z"
                        />
                      </g>
                    </svg>
                    <img
                      alt={services.alt}
                      class="w-100 h-100 absolute object-cover"
                      width={60}
                      height={60}
                      src={services.image}
                    />
                  </div>
                  <div class="inline-flex items-center text-lg font-semibold text-primary">
                    {services.title}
                  </div>
                </a>
              </div>
            ))
          }
        </div>
      </div>
    </div>
    <div class="my-10 text-2xl">Самые востребованные услуги:</div>
    <HomapageFeature feature_list={service_top_list} client:load />
  </div>
</section>
